import{s as lt,h as it,o as ft}from"../chunks/scheduler.41143b43.js";import{S as rt,i as ut,g as f,s as o,m as O,h as r,c as p,x as b,j as F,n as P,f as t,D as at,l as Z,a as i,y as T,o as st,E as He}from"../chunks/index.8cc052f2.js";import{f as ke}from"../chunks/index.9abb7534.js";function ot(a){let w,x,_,W="**************************************************************************",H,c,M=`<br/>
	Asynchronous Functions for the Very Simple Recursive Closure`,y,C,d,m,A,S='M, defined in <a href="./Archive/monads">monads</a>, has an extra line of code here to account for possible asynchronisity. Here&#39;s the tweaked definition:',I,E,g,G,L,l="This code:",u,v,s,R,k,qe="Results in this:",ee,$,je,te,ne,ie,se,le,fe,re,ue,z,Ke='In <a href="/Functions/Archive/Monad3/" target="_blank">Monad3</a> the demonstration used this monad:',ae,Q,Fe,oe,pe,ve,de,N,We="**************************************************************************",me,h,Ge=`<br/>
        Asynchronous Functions for the Very Simple Recursive Closure`,B,ce,ye,_e,V,Qe='M, defined in <a href="./Archive/monads">monads</a>, has an extra line of code here to account for possible asynchronisity. Here&#39;s the tweaked definition:',xe,U,Se,Re,D,Ue="This code:",he,X,$e,be,J,Xe="Results in this:",Me,q,ze,Ce,Ae,Oe,Pe,Te,we,Ie,Ee,K,Ye='In <a href="/Functions/Archive/Monad3/" target="_blank">Monad3</a> the demonstration used this monad:',Le,Y,Ne,j;return{c(){w=f("br"),x=o(),_=f("div"),_.textContent=W,H=o(),c=f("div"),c.innerHTML=M,C=o(),d=f("br"),m=o(),A=f("p"),A.innerHTML=S,I=o(),E=f("pre"),g=O(a[3]),G=o(),L=f("p"),L.textContent=l,u=o(),v=f("pre"),s=O(a[2]),R=o(),k=f("p"),k.textContent=qe,ee=o(),$=f("p"),je=O("Progression of AR: "),te=O(a[0]),ne=o(),ie=f("br"),se=f("br"),le=o(),fe=f("br"),re=f("br"),ue=o(),z=f("p"),z.innerHTML=Ke,ae=o(),Q=f("pre"),Fe=O(a[1]),oe=o(),pe=o(),ve=f("br"),de=o(),N=f("div"),N.textContent=We,me=o(),h=f("div"),h.innerHTML=Ge,ce=o(),ye=f("br"),_e=o(),V=f("p"),V.innerHTML=Qe,xe=o(),U=f("pre"),Se=O(a[3]),Re=o(),D=f("p"),D.textContent=Ue,he=o(),X=f("pre"),$e=O(a[2]),be=o(),J=f("p"),J.textContent=Xe,Me=o(),q=f("p"),ze=O("Progression of AR: "),Ce=O(a[0]),Ae=o(),Oe=f("br"),Pe=f("br"),Te=o(),we=f("br"),Ie=f("br"),Ee=o(),K=f("p"),K.innerHTML=Ye,Le=o(),Y=f("pre"),Ne=O(a[1]),this.h()},l(e){w=r(e,"BR",{}),x=p(e),_=r(e,"DIV",{"data-svelte-h":!0}),b(_)!=="svelte-9ovhf0"&&(_.textContent=W),H=p(e),c=r(e,"DIV",{style:!0,"data-svelte-h":!0}),b(c)!=="svelte-3imyyi"&&(c.innerHTML=M),C=p(e),d=r(e,"BR",{}),m=p(e),A=r(e,"P",{"data-svelte-h":!0}),b(A)!=="svelte-1gzf7sb"&&(A.innerHTML=S),I=p(e),E=r(e,"PRE",{});var n=F(E);g=P(n,a[3]),n.forEach(t),G=p(e),L=r(e,"P",{"data-svelte-h":!0}),b(L)!=="svelte-kpqgpv"&&(L.textContent=l),u=p(e),v=r(e,"PRE",{});var Ze=F(v);s=P(Ze,a[2]),Ze.forEach(t),R=p(e),k=r(e,"P",{"data-svelte-h":!0}),b(k)!=="svelte-1wcj9nt"&&(k.textContent=qe),ee=p(e),$=r(e,"P",{});var Ve=F($);je=P(Ve,"Progression of AR: "),te=P(Ve,a[0]),Ve.forEach(t),ne=p(e),ie=r(e,"BR",{}),se=r(e,"BR",{}),le=p(e),fe=r(e,"BR",{}),re=r(e,"BR",{}),ue=p(e),z=r(e,"P",{"data-svelte-h":!0}),b(z)!=="svelte-10goiui"&&(z.innerHTML=Ke),ae=p(e),Q=r(e,"PRE",{});var ge=F(Q);Fe=P(ge,a[1]),ge.forEach(t),oe=p(e),at("svelte-1v73x6b",document.head).forEach(t),pe=p(e),ve=r(e,"BR",{}),de=p(e),N=r(e,"DIV",{"data-svelte-h":!0}),b(N)!=="svelte-9ovhf0"&&(N.textContent=We),me=p(e),h=r(e,"DIV",{style:!0,"data-svelte-h":!0}),b(h)!=="svelte-1qygadg"&&(h.innerHTML=Ge),ce=p(e),ye=r(e,"BR",{}),_e=p(e),V=r(e,"P",{"data-svelte-h":!0}),b(V)!=="svelte-1gzf7sb"&&(V.innerHTML=Qe),xe=p(e),U=r(e,"PRE",{});var et=F(U);Se=P(et,a[3]),et.forEach(t),Re=p(e),D=r(e,"P",{"data-svelte-h":!0}),b(D)!=="svelte-kpqgpv"&&(D.textContent=Ue),he=p(e),X=r(e,"PRE",{});var tt=F(X);$e=P(tt,a[2]),tt.forEach(t),be=p(e),J=r(e,"P",{"data-svelte-h":!0}),b(J)!=="svelte-1wcj9nt"&&(J.textContent=Xe),Me=p(e),q=r(e,"P",{});var De=F(q);ze=P(De,"Progression of AR: "),Ce=P(De,a[0]),De.forEach(t),Ae=p(e),Oe=r(e,"BR",{}),Pe=r(e,"BR",{}),Te=p(e),we=r(e,"BR",{}),Ie=r(e,"BR",{}),Ee=p(e),K=r(e,"P",{"data-svelte-h":!0}),b(K)!=="svelte-10goiui"&&(K.innerHTML=Ye),Le=p(e),Y=r(e,"PRE",{});var nt=F(Y);Ne=P(nt,a[1]),nt.forEach(t),this.h()},h(){Z(c,"font-family","Times New Roman"),Z(c,"text-align","center"),Z(c,"font-size","32px"),document.title="Asynchronous Recursive Closures",Z(h,"font-family","Times New Roman"),Z(h,"text-align","center"),Z(h,"font-size","32px")},m(e,n){i(e,w,n),i(e,x,n),i(e,_,n),i(e,H,n),i(e,c,n),i(e,C,n),i(e,d,n),i(e,m,n),i(e,A,n),i(e,I,n),i(e,E,n),T(E,g),i(e,G,n),i(e,L,n),i(e,u,n),i(e,v,n),T(v,s),i(e,R,n),i(e,k,n),i(e,ee,n),i(e,$,n),T($,je),T($,te),i(e,ne,n),i(e,ie,n),i(e,se,n),i(e,le,n),i(e,fe,n),i(e,re,n),i(e,ue,n),i(e,z,n),i(e,ae,n),i(e,Q,n),T(Q,Fe),i(e,oe,n),i(e,pe,n),i(e,ve,n),i(e,de,n),i(e,N,n),i(e,me,n),i(e,h,n),i(e,ce,n),i(e,ye,n),i(e,_e,n),i(e,V,n),i(e,xe,n),i(e,U,n),T(U,Se),i(e,Re,n),i(e,D,n),i(e,he,n),i(e,X,n),T(X,$e),i(e,be,n),i(e,J,n),i(e,Me,n),i(e,q,n),T(q,ze),T(q,Ce),i(e,Ae,n),i(e,Oe,n),i(e,Pe,n),i(e,Te,n),i(e,we,n),i(e,Ie,n),i(e,Ee,n),i(e,K,n),i(e,Le,n),i(e,Y,n),T(Y,Ne),j=!0},p(e,n){(!j||n[0]&1)&&st(te,e[0]),(!j||n[0]&1)&&st(Ce,e[0])},i(e){j||(e&&it(()=>{j&&(y||(y=He(c,ke,{},!0)),y.run(1))}),e&&it(()=>{j&&(B||(B=He(h,ke,{},!0)),B.run(1))}),j=!0)},o(e){e&&(y||(y=He(c,ke,{},!1)),y.run(0)),e&&(B||(B=He(h,ke,{},!1)),B.run(0)),j=!1},d(e){e&&(t(w),t(x),t(_),t(H),t(c),t(C),t(d),t(m),t(A),t(I),t(E),t(G),t(L),t(u),t(v),t(R),t(k),t(ee),t($),t(ne),t(ie),t(se),t(le),t(fe),t(re),t(ue),t(z),t(ae),t(Q),t(oe),t(pe),t(ve),t(de),t(N),t(me),t(h),t(ce),t(ye),t(_e),t(V),t(xe),t(U),t(Re),t(D),t(he),t(X),t(be),t(J),t(Me),t(q),t(Ae),t(Oe),t(Pe),t(Te),t(we),t(Ie),t(Ee),t(K),t(Le),t(Y)),e&&y&&y.end(),e&&B&&B.end()}}}var Be="stop";function Je(a){return function w(x){return x=="stop"?a:(a instanceof Promise?a=a.then(_=>a=x(_)):typeof x=="function"&&(a=x(a)),w)}}function pt(a,w,x){let _;var W,H,c,M=async l=>await l,y=Je(3),C,d=console.log,m;ft(async()=>{d("In start <><><><><><><><><> In start"),C=new WebSocket("wss://schalk3.com:3003"),new WebSocket("wss://schalk3.com:3002");var l=s=>R=>S(s)(R);function u(s){d("At the top of fact2. a is ",s),C.readyState==1?s instanceof Promise?s.then(R=>C.send(parseInt(R))):C.send(parseInt(s)):setTimeout(()=>u(s),200),C.onmessage=function(R){return console.log("In fact2. e and e.data are",R,R.data),s=JSON.parse(R.data),m.push(s),s=Je(y(Be))(k=>s)(Be),console.log("OOOOOOOOOOOOOOOOOOOOOOOOOOO a is",s),d("At the end of fact2. a is",s,Array.isArray(s)),s}}setTimeout(()=>d("AR is",m),2e3),d("J and K are",W,H),d("J and K are",W,H),setTimeout(()=>d("Now J and K are",W,H),3e3);var v=()=>{y(S(1))(s=>l(s)(7))(s=>s*2)(A(58))(l(2))(S(.025))(A(1))(S(7))(u)(s=>36)(u)(s=>888)(I)(u)(s=>[2,3,4])(I)(s=>s=s.concat(5))(I)(E)(u),setTimeout(()=>{y(s=>[3,3,3])(I)(E)(u)},3e3)};v(),setTimeout(()=>v(),5e3)}),d("<@><@><@> <$><$><$> <%><%><%> m3(s)",y(Be)),y=Je(3);var A=l=>async u=>{var v;return l=M(l),u=M(u),await l.then(s=>l=parseFloat(s)),await u.then(s=>u=parseFloat(s)),v=l+u,m.push(v),d("in asyncMult j and AR are",v,m),v},S=l=>async u=>{var v;return l=M(l),u=M(u),await l.then(s=>l=parseFloat(s)),await u.then(s=>u=parseFloat(s)),v=l*u,m.push(v),d("in asyncMult j and AR are",v,m),v},I=l=>(m.push(l),l);d("AR is",m),d("$&$&$&$&$&$&  m3(s) is",y(Be)),M(9).then(l=>console.log("v == 9",l===9)),d("f(f(7)) == f(7)",M(7).then(l=>M(7).then(u=>l==u)));function E(l){return console.log("  **************  Top of red. arr is",l),l instanceof Promise&&l.then(u=>l=u),Array.isArray(l)&&(l=l.reduce((u,v)=>u*v),console.log("  **************  In red. ar is",l),m.push(l),_()),l}setTimeout(()=>x(0,c=_()),2200),setTimeout(()=>x(0,c=_()),3500);var g=`function Comp ( AR = [] )  {
      var f_, p, run;
      var ar = AR.slice();
      var x = ar.pop();
      return run = (function run (x) {
        if (x === null || x === NaN ||
          x === undefined) x = f_('stop').pop();
        if (x instanceof Filt) {
          var z = ar.pop();
          if (x.filt(z)) x = z; else ar = [];
        }
        else if (x instanceof Promise) x.then(y =>
          {if (y != undefined && typeof y !== "boolean"
            && y === y && y.name !== "f_" && y.name !== "stop" ) {
          ar.push(y);
          diffRender()
        }})
        else if (x != undefined && x === x && x !== false
          && x.name !== "f_" && x.name !== "stop" ) {
          ar.push(x);
          diffRender()
        };
        function f_ (func) {
          if (func === 'stop' || func === 'S') return ar;
          else if (func === 'finish' || func === 'F') return Object.freeze(ar);
          else if (typeof func !== "function") p = func;
          else if (x instanceof Promise) p = x.then(v => func(v));
          else p = func(x);
          return run(p);
        };
        return f_;
      })(x)
    }`,G=`m3(asyncMult(1))(x => fMult(x)(7))(v => v*2)(asyncAdd(58))(fMult(2))
    (asyncMult(0.025))(asyncAdd(1))(asyncMult(7))(fact2)(v => 36)(fact2)
    (v => 888)(asyncId)(fact2)(v => [2,3,4])(asyncId)(v => v = v.concat(5))
    (asyncId)(red)(fact2)
    
    setTimeout(() => {m3(v => [3,3,3])(asyncId)(red)(fact2)},3000);
    
    setTimeout(() => L = ar(),2200);
    setTimeout(() => L = ar(),3500);
        where ar = () => AR.join(" --> ")
          and AR and other relevant functions are defined below.`,L=`function M(x) {
        return function go(func) {
            if (func == "stop") return x
            if (x instanceof Promise) x = x.then(v => x = func(v));
            else if (typeof func == 'function') x = func(x);
            return go;
        };
    }`;return a.$$.update=()=>{a.$$.dirty[0]&16&&(_=()=>m.join(" --> "))},x(4,m=[]),[c,g,G,L,m]}class yt extends rt{constructor(w){super(),ut(this,w,pt,ot,lt,{},null,[-1,-1])}}export{yt as component};
